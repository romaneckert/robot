var Interface=Interface||{};Interface.Config=function(){this.cMain=16777215};var Interface=Interface||{};Interface.Circle=function(e,n,t,i,a,c,s,r){var o=new THREE.LineBasicMaterial({color:i,linewidth:a,opacity:c,transparent:!0}),h=new THREE.CircleGeometry(e,n);void 0!=s&&void 0!=r&&(h=new THREE.CircleGeometry(e,n,s,r)),h.vertices.shift();var d=new THREE.Line(h,o);return d.position.x=t[0],d.position.y=t[1],d.position.z=t[2],d};var Interface=Interface||{};Interface.Line=function(e,n,t,i){var a=new THREE.LineBasicMaterial({color:n,linewidth:t,opacity:i,transparent:!0,linejoin:"butt"}),c=new THREE.Geometry;return $.each(e,function(e,n){c.vertices.push(new THREE.Vector3(n[0],n[1],n[2]))}),new THREE.Line(c,a)};var Interface=Interface||{};Interface.Main={config:null,timer:null,debug:!1,scene:null,camera:null,renderer:null,objects:{},clock:new THREE.Clock,init:function(){this.config=new Interface.Config,console.log(this.config),$(window).on("load",this.handleWindowLoad.bind(this))},handleWindowLoad:function(){this.createScene(),$("body").on("click","a",this.handleButtonClick.bind(this)),this.objects.leftEye=new THREE.Object3D,this.objects.leftEye.add(new Interface.Line([[.5,0,0],[1.5,0,0]],this.config.cMain,1,.5)),this.objects.leftEye.add(new Interface.Line([[-.5,0,0],[-1.5,0,0]],this.config.cMain,1,.5)),this.objects.leftEye.add(new Interface.Circle(1.3,128,[0,0,0],this.config.cMain,1,.7)),this.objects.leftEye.add(new Interface.Circle(1.2,128,[0,0,0],this.config.cMain,6,.05)),this.objects.leftEye.add(new Interface.Circle(.26,128,[0,0,0],this.config.cMain,1,.2,45*Math.PI/180,90*Math.PI/180)),this.objects.leftEye.add(new Interface.Circle(.26,128,[0,0,0],this.config.cMain,1,.2,-135*Math.PI/180,90*Math.PI/180)),this.objects.leftEye.position.x=-2,this.objects.leftEye.position.y=1,this.scene.add(this.objects.leftEye),this.objects.rightEye=new THREE.Object3D,this.objects.rightEye.add(new Interface.Circle(1.3,128,[0,0,0],this.config.cMain,1,.7)),this.objects.rightEye.add(new Interface.Circle(1.2,128,[0,0,0],this.config.cMain,6,.05)),this.objects.rightEye.position.x=2,this.objects.rightEye.position.y=1,this.scene.add(this.objects.rightEye),this.scene.add(new Interface.Line([[-7,2,0],[-4,0,0],[-4,-2,0],[-4.5,-2.5,0]],this.config.cMain,1,.5)),this.scene.add(new Interface.Line([[7,2,0],[4,0,0],[4,-2,0],[4.5,-2.5,0]],this.config.cMain,1,.5)),this.scene.add(new Interface.Line([[-6,1.2,0],[-4.1,-.05,0],[-4.1,-1,0]],this.config.cMain,3,.6)),this.scene.add(new Interface.Line([[6,1.2,0],[4.1,-.05,0],[4.1,-1,0]],this.config.cMain,3,.6)),this.scene.add(new Interface.Circle(.1,128,[0,1,0],this.config.cMain,1,.7)),this.scene.add(new Interface.Circle(.2,128,[0,1,0],this.config.cMain,1,.2)),this.scene.add(new Interface.Circle(384,128,[0,0,0],this.config.cMain,1,.7)),this.scene.add(new Interface.Line([[-.3,-2,0],[-1,-2,0],[-1.3,-2.3,0],[-1.3,-4,0],[-1,-4.3,0],[-1,-5,0]],this.config.cMain,1,.5)),this.scene.add(new Interface.Line([[.3,-2,0],[1,-2,0],[1.3,-2.3,0],[1.3,-4,0],[1,-4.3,0],[1,-5,0]],this.config.cMain,1,.5));var e=document.createElement("canvas");e.width=512,e.height=256;var n=e.getContext("2d");n.font='1000px "Roboto"',n.textAlign="center",n.fillStyle="rgba(255,255,255,0.9)",n.fillText("10",256,128);var t=new THREE.Texture(e);t.needsUpdate=!0;var i=new THREE.MeshBasicMaterial({map:t});i.transparent=!0;var a=new THREE.PlaneGeometry(1e3,500),c=new THREE.Mesh(a,i);c.position.x=0,c.position.y=0,this.scene.add(c),this.render(),this.update()},createScene:function(){if(this.scene=new THREE.Scene,this.camera=new THREE.OrthographicCamera(window.innerWidth/-2,window.innerWidth/2,window.innerHeight/-2,window.innerHeight/2,.1,1e3),this.camera.position.z=1e3,this.renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(this.renderer.domElement),this.debug){var e=new THREE.GridHelper(10,20,0,0);e.position.y=0,e.rotateX(90*Math.PI/180),this.scene.add(e)}},update:function(){$.get("/api/data",this.handleUpdateSuccess.bind(this)).fail(this.handleUpdateFail.bind(this))},render:function(){var e=this.clock.getDelta();this.objects.leftEye.rotateZ(100*e*Math.PI/180),window.requestAnimationFrame(this.render.bind(this)),this.renderer.render(this.scene,this.camera)},handleUpdateSuccess:function(e){$("#header-nav .navbar-brand span").removeClass("flashing"),$("[data-model]").each(function(n,t){var i=$(t).data("model"),a=$(t).data("attribute");e[i]&&e[i][a]&&$(t).text(e[i][a])}),setTimeout(this.update.bind(this),200)},handleUpdateFail:function(e){$("#header-nav .navbar-brand span").addClass("flashing"),setTimeout(this.update.bind(this),200)},handleButtonClick:function(e){var n=$(e.currentTarget),t=n.data("action");if(t)switch(e.preventDefault(),t){case"":default:$.get("/robot/"+t,function(e){$("#content").html(e),$("#loading").remove()}.bind(this)).fail(function(){$("#content").html("error in action "+t),$("#loading").remove()})}}},Interface.Main.init();
//# sourceMappingURL=interface.min.js.map
