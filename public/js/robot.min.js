var Robot={timer:null,init:function(){$(document).ready(this.handleDocumentReady.bind(this))},handleDocumentReady:function(){$("body").on("click","a",this.handleButtonClick.bind(this)),this.update()},update:function(){$.get("/api/data",this.handleUpdateSuccess.bind(this)).fail(this.handleUpdateFail.bind(this))},handleUpdateSuccess:function(t){$("#header-nav .navbar-brand span").removeClass("flashing"),$("[data-model]").each(function(a,n){var i=$(n).data("model"),e=$(n).data("attribute");t[i]&&t[i][e]&&$(n).text(t[i][e])}),setTimeout(this.update.bind(this),200)},handleUpdateFail:function(t){$("#header-nav .navbar-brand span").addClass("flashing"),setTimeout(this.update.bind(this),200)},handleButtonClick:function(t){var a=$(t.currentTarget),n=a.data("action");if($("body").append('<div id="loading"><span class="glyphicon glyphicon-repeat spinner"></span></div>'),n)switch(t.preventDefault(),n){case"":default:$.get("/robot/"+n,function(t){$("#content").html(t),$("#loading").remove()}.bind(this)).fail(function(){$("#content").html("error in action "+n),$("#loading").remove()})}}};Robot.init();